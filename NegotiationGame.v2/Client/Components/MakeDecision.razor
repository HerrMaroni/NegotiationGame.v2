@page "/MakeDecision"

<MudPaper Elevation="0">
    <MudStack Justify="Justify.Center" AlignItems="AlignItems.Center" Spacing="16" Class="mud-height-full">
        <MudStack Row="true" Justify="Justify.SpaceEvenly" Spacing="16" AlignItems="AlignItems.Center">
            <CascadingValue Value="@GameData.Red.Color">
                <CoinLogic DisableButton="true" MaxCoins="@GameData.MaxCoinAmount" @bind-Amount="@GameData.Red.Amount"/>
            </CascadingValue>

            <CascadingValue Value="@GameData.Blue.Color">
                <CoinLogic DisableButton="true" MaxCoins="@GameData.MaxCoinAmount" @bind-Amount="@GameData.Blue.Amount"/>
            </CascadingValue>
 
            <CascadingValue Value="@GameData.Yellow.Color">
                <CoinLogic DisableButton="true" MaxCoins="@GameData.MaxCoinAmount" @bind-Amount="@GameData.Yellow.Amount"/>
            </CascadingValue>
        </MudStack>
        
        <MudStack Justify="Justify.SpaceEvenly" AlignItems="AlignItems.Center" Class="mud-width-full">
            <MudPaper Outlined="true" Class="mud-theme-transparent rounded border-4 mud-border-primary py-3 mud-width-full">
                <MudText Align="Align.Center" Typo="Typo.h5">Balance: @GameData.CurrentBalance | @GameData.MaxBalance</MudText>
            </MudPaper>
            <MudStack Row="true" Class="mud-width-full" Style="height: 60px">
                <MudButton OnClick="() => GameData.MakeDecision(Event.AcceptOffer)" FullWidth="true" Variant="Variant.Filled" Size="Size.Large" Color="Color.Success" Class="border-4">Accept Offer</MudButton>
                <MudButton OnClick="() => GameData.MakeDecision(Event.DeclineOffer)" FullWidth="true" Variant="Variant.Filled" Size="Size.Large" Color="Color.Secondary" Class="border-4">Decline Offer</MudButton>
            </MudStack>
        </MudStack>
        
    </MudStack>
</MudPaper>

@code {
    [Inject] GameData GameData { get; set; } = default!;

    [Parameter]
    public int EnemyCoinsAmount { get; set; }

    [Parameter]
    public int PlayerCoinsAmount { get; set; }
}