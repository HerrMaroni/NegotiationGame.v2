@page "/MakeOfferAllCoins"

<MudPaper Elevation="0">
    <MudStack Justify="Justify.Center" AlignItems="AlignItems.Center" Spacing="16" Class="mud-height-full">
        <MudStack Row="true" Justify="Justify.SpaceEvenly" Spacing="16" AlignItems="AlignItems.Center">
            <CascadingValue Value="@GameData.Red.Color">
                <CoinLogic MaxCoins="@GameData.MaxCoinAmount" @bind-Amount="@GameData.Red.Amount"/>
            </CascadingValue>

            <CascadingValue Value="@GameData.Blue.Color">
                <CoinLogic MaxCoins="@GameData.MaxCoinAmount" @bind-Amount="@GameData.Blue.Amount"/>
            </CascadingValue>
 
            <CascadingValue Value="@GameData.Yellow.Color">
                <CoinLogic MaxCoins="@GameData.MaxCoinAmount" @bind-Amount="@GameData.Yellow.Amount"/>
            </CascadingValue>
        </MudStack>
        
        <MudStack Justify="Justify.SpaceEvenly" AlignItems="AlignItems.Center" Class="mud-width-full">
            <MudPaper Outlined="true" Class="mud-theme-transparent rounded border-4 mud-border-primary py-3 mud-width-full">
                <MudText Align="Align.Center" Typo="Typo.h5">Balance: @GameData.CurrentBalance | @GameData.MaxBalance</MudText>
            </MudPaper>
            <MudButton OnClick="() => GameData.MakeOffer(Offer)" FullWidth="true" Variant="Variant.Filled" Color="Color.Primary" Class="border-4">Submit Offer</MudButton>
        </MudStack>
        
    </MudStack>
</MudPaper>

@code {
    [Inject] GameData GameData { get; set; } = default!;

    [Parameter]
    public int EnemyCoinsAmount { get; set; }

    [Parameter]
    public int PlayerCoinsAmount { get; set; }

    private Offer Offer => new()
    {
        RedCoin = GameData.MaxCoinAmount - GameData.Red.Amount,
        BlueCoin = GameData.MaxCoinAmount - GameData.Blue.Amount,
        YellowCoin = GameData.MaxCoinAmount - GameData.Yellow.Amount
    };

}